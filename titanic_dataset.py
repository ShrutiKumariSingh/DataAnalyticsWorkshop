# -*- coding: utf-8 -*-
"""Titanic Dataset.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1XxWG6HAJBAThK8Z8JB4hlVXpMDJ9OqQ4
"""

import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt

# Load Titanic dataset
df = pd.read_csv('train.csv')

# View basic info
print(df.info())

# Missing values
print("\nMissing Values:\n", df.isnull().sum())

# Descriptive statistics
print("\nDescriptive Statistics:\n", df.describe(include='all'))

# Univariate Analysis - Age
print("\nAge Distribution:\n", df['Age'].describe())
print("Missing Age values:", df['Age'].isnull().sum())

plt.figure(figsize=(10, 4))
sns.histplot(df['Age'].dropna(), bins=30, kde=True)
plt.title("Age Distribution")
plt.show()

# Univariate Analysis - Fare
print("\nFare Distribution:\n", df['Fare'].describe())
print("Fare Skewness:", df['Fare'].skew())

plt.figure(figsize=(10, 4))
sns.histplot(df['Fare'], bins=40, kde=True)
plt.title("Fare Distribution")
plt.show()

# Outliers
outliers = df[df['Fare'] > df['Fare'].quantile(0.99)]
print("\nTop 1% Expensive Fares:\n", outliers[['Name', 'Fare']])

# Embarkation Analysis
print("\nEmbarked Value Counts:\n", df['Embarked'].value_counts())
print("Missing Embarked values:", df['Embarked'].isnull().sum())

sns.countplot(data=df, x='Embarked')
plt.title("Passengers by Embarkation Port")
plt.show()

# Passenger Gender
print("\nGender Distribution:\n", df['Sex'].value_counts())

sns.countplot(data=df, x='Sex')
plt.title("Passenger Gender Distribution")
plt.show()

# Passenger Class
print("\nPassenger Class Distribution:\n", df['Pclass'].value_counts())

sns.countplot(data=df, x='Pclass')
plt.title("Passenger Class Distribution")
plt.show()

#Bivariate Analysis
sns.boxplot(data=df, x='Pclass', y='Fare')
plt.title("Fare vs Pclass")
plt.show()

sns.histplot(data=df, x='Age', hue='Survived', kde=True, bins=30)
plt.title("Survival based on Age")
plt.show()

sns.countplot(data=df, x='Embarked', hue='Survived')
plt.title("Survival by Embarked Location")
plt.show()

#multivariate analysis
sns.scatterplot(data=df, x='Age', y='Fare', hue='Survived', style='Pclass')
plt.title("Survival based on Age, Fare, and Pclass")
plt.show()

sns.catplot(data=df, x='Embarked', hue='Survived', col='Pclass', kind='count')
plt.suptitle("Survival by Embarkation and Pclass", y=1.02)
plt.show()

sns.countplot(data=df, x='Survived')
plt.title("Overall Survival Distribution")
plt.show()

print(df['Survived'].value_counts(normalize=True))  # Percentage

sns.catplot(data=df, x='Sex', hue='Survived', col='Pclass', row='Embarked', kind='count')
plt.suptitle("Survival by Sex, Pclass, and Embarkation", y=1.02)
plt.show()